var Valor=React.createClass({displayName:"Valor",val_real:function(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g="undefined"==typeof d?",":d,h="undefined"==typeof c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)},render:function(){return React.createElement("span",null,"R$ ",this.val_real(this.props.val,2,",","."))}}),MaisComprados=React.createClass({displayName:"MaisComprados",getInitialState:function(){return{data:[]}},componentWillMount:function(){var a=new XMLHttpRequest;a.open("get","js/produtos.json",!0),a.onload=function(){var b=JSON.parse(a.responseText);this.setState({data:b})}.bind(this),a.send()},render:function(){return React.createElement("div",null,React.createElement("div",{className:"title column"},React.createElement("h2",null,"Mais Comprados")),React.createElement(ProdutoContainer,{data:this.state.data}))}}),ProdutoContainer=React.createClass({displayName:"ProdutoContainer",render:function(){var a=this.props.data.map(function(a){return React.createElement(Produto,{key:a.id,nome:a.nome,rasting:a.rasting,img:a.imagem_url,valor:a.valor})});return React.createElement("div",{className:"produtos five-column"},a)}}),Produto=React.createClass({displayName:"Produto",addCart:function(a){a.preventDefault(),PubSub.publish("cart.added",this.props)},getInitialState:function(){return{data:this.props}},render:function(){var a="";return this.props.valor.anterio&&(a=React.createElement(Valor,{val:this.props.valor.anterio})),React.createElement("article",{className:"produto-item column"},React.createElement("div",{className:"produto-inner animated"},React.createElement("div",{className:"produto-infor"},React.createElement("figure",null,React.createElement("img",{src:this.props.img,alt:"{this.props.nome}"})),React.createElement("div",{className:"rating","data-rasting":this.props.rasting},React.createElement("i",{className:"fa fa-star","data-star":"5"}),React.createElement("i",{className:"fa fa-star","data-star":"4"}),React.createElement("i",{className:"fa fa-star","data-star":"3"}),React.createElement("i",{className:"fa fa-star","data-star":"2"}),React.createElement("i",{className:"fa fa-star","data-star":"1"})),React.createElement("h4",null,this.props.nome),React.createElement("p",{className:"preco"},a,React.createElement(Valor,{val:this.props.valor.atual}))),React.createElement("button",{"data-action":"add-cart",className:"button-action animated",onClick:this.addCart},"Adicionar ao carrinho")))}});ReactDOM.render(React.createElement(MaisComprados,null),document.getElementById("mais-comprados"));var CarrinhoCompras=React.createClass({displayName:"CarrinhoCompras",getInitialState:function(){var a=PubSub.subscribe("cart.added",this.addItem);return console.log(a),{items:[],total:0,item_count:0}},addItem:function(a,b){this.state.items.push(b),this.countTotal(),this.forceUpdate()},countTotal:function(){var a=0,b=this.state.item_count+1;this.state.items.forEach(function(b,c){a+=b.valor.atual}),this.setState({total:a,item_count:b}),alert("Produto adicionado ao Carrinho de Compras")},render:function(){var a=this.state.items.map(function(a){return React.createElement("li",{key:a.id,className:"cart-item"},React.createElement("span",{className:"cart-item__nome"},a.nome),React.createElement("span",{className:"cart-item__valor"},React.createElement(Valor,{val:a.valor.atual})))}),b=React.createElement("ul",{className:"produtos-cart"},a),c="Nenhum produto adicionado";return React.createElement("div",null,React.createElement("a",{id:"cart-action",className:"cart"},React.createElement("span",{className:"icon-cart"},React.createElement("b",{className:"contador"},this.state.item_count)),React.createElement("span",{className:"valor-total"},React.createElement(Valor,{val:this.state.total}))),React.createElement("div",{className:"cart-content animated fadeIn"},a.length>0?b:c))}});ReactDOM.render(React.createElement(CarrinhoCompras,null),document.getElementById("carrinho-compras"));